# è¦ä½¿ç”¨è¿™ä¸ªparser,åœ¨è®¢é˜…é“¾æ¥åé¢åŠ ä¸Š#parser
# è¿™ä¸ªparseræå–å‡ºClashè®¢é˜…é“¾æ¥ä¸­çš„proxyå¹¶ä¸”å»é™¤æ‰å…¶ä»–çš„ruleså’Œproxy groups
# ç„¶åå†åŠ å…¥è‡ªå®šä¹‰é…ç½®çš„proxy groupså’Œrules
# è¾¾åˆ°ç±»ä¼¼å¼•ç”¨proxy providersçš„æ•ˆæœ
parsers:
  # è¿™é‡Œè®¾ç½®å¦‚ä½•åŒ¹é…url,ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨url
  # url: www.url.com
  - reg: ^.*#parser$
  # ä¸‹é¢æ˜¯åˆ é™¤æœåŠ¡å•†è‡ªå¸¦çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
        module.exports.parse = (raw, { yaml }) => {
          const rawObj = yaml.parse(raw)
          const groups = []
          const rules = []
          return yaml.stringify({ ...rawObj, 'proxy-groups': groups, rules })
        } 
    # å¾€yamlæ–‡ä»¶ä¸­æ·»åŠ é…ç½®
    yaml:
        # å»ºç«‹è‡ªå®šä¹‰çš„proxy groups
        prepend-proxy-groups: # å»ºç«‹ç­–ç•¥ç»„
        - name: ğŸŒå›½å¤–æµé‡
          type: select
          proxies:
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
            - ğŸš€ç›´æ¥è¿æ¥
        - name: ğŸ’¬å›½å¤–åª’ä½“-æ–‡å­—å›¾ç‰‡
          type: select
          proxies:
            - ğŸŒå›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: ğŸššå¤§æµé‡
          type: select
          proxies:
            - ğŸŒå›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: âš“ï¸å…¶ä»–æµé‡
          type: select
          proxies:
            - ğŸŒå›½å¤–æµé‡
            - ğŸš€ç›´æ¥è¿æ¥
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: âœˆï¸Telegram
          type: select
          proxies:
            - ğŸŒå›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: ğŸ“½Netflix
          type: select
          proxies:
            - ğŸŒå›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: ğŸ˜€OpenAI
          type: select
          proxies:
            - ğŸŒå›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
        - name: ğŸ®Steam
          type: select
          proxies:
            - ğŸŒå›½å¤–æµé‡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
            - âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
            - ğŸ‡¸ğŸ‡¬
            - ğŸ‡¯ğŸ‡µ
            - ğŸ‡ºğŸ‡¸
            - ğŸ³ï¸
            - ğŸš€ç›´æ¥è¿æ¥
        - name: ğŸ¬å“”å“©å“”å“©
          type: select
          proxies:
            - ğŸš€ç›´æ¥è¿æ¥
            - ğŸ‡­ğŸ‡°
            - ğŸ‡¹ğŸ‡¼
        - name: ğŸè‹¹æœæœåŠ¡
          type: select
          proxies:
            - ğŸš€ç›´æ¥è¿æ¥
            - ğŸŒå›½å¤–æµé‡
        - name: ğŸš€ç›´æ¥è¿æ¥
          type: select
          proxies:
            - DIRECT
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC
          type: load-balance
          url: http://www.google.com/generate_204
          interval: 300
          strategy: consistent-hashing
          proxies:
        - name: ğŸ‡­ğŸ‡°
          type: select
          proxies:
        - name: ğŸ‡¹ğŸ‡¼
          type: select
          proxies:
        - name: ğŸ‡¸ğŸ‡¬
          type: select
          proxies:
        - name: ğŸ‡¯ğŸ‡µ
          type: select
          proxies:
        - name: ğŸ‡ºğŸ‡¸
          type: select
          proxies:
        - name: ğŸ³ï¸
          type: select
          proxies:
        
        # å¾€proxy groupsä¸­åŠ å…¥proxyèŠ‚ç‚¹ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼,å¤šä¸ªè¡¨è¾¾å¼ç”¨|åˆ†éš”
        commands:
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡).proxies=[]proxyNames|HK \d{3}
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§åŠ¨æ€).proxies=[]proxyNames|é¦™æ¸¯.+ä¸­ç»§\såŠ¨æ€
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-ä¸­ç»§NF).proxies=[]proxyNames|é¦™æ¸¯.+ä¸­ç»§\sNF
          - proxy-groups.(âš–ï¸ğŸ‡­ğŸ‡°-è´Ÿè½½å‡è¡¡-IPLC).proxies=[]proxyNames|IPLC.*é¦™æ¸¯
          - proxy-groups.(ğŸ‡­ğŸ‡°).proxies=[]proxyNames|é¦™æ¸¯|HK
          - proxy-groups.(ğŸ‡¹ğŸ‡¼).proxies=[]proxyNames|å°æ¹¾|TW
          - proxy-groups.(ğŸ‡¸ğŸ‡¬).proxies=[]proxyNames|ç‹®åŸ|æ–°åŠ å¡|SG
          - proxy-groups.(ğŸ‡¯ğŸ‡µ).proxies=[]proxyNames|æ—¥æœ¬|JP
          - proxy-groups.(ğŸ‡ºğŸ‡¸).proxies=[]proxyNames|ç¾å›½|US
          - proxy-groups.(ğŸ³ï¸).proxies=[]proxyNames|éŸ©å›½|è‹±å›½|ä¿„ç½—æ–¯|é˜¿æ ¹å»·|é©¬æ¥|åœŸè€³å…¶|RU

        # é…ç½®è‡ªå®šä¹‰è§„åˆ™
        prepend-rules:
          # é…ç½®Githubä¸Šçš„è§„åˆ™é›†
          - RULE-SET,applications,DIRECT
          - DOMAIN,clash.razord.top,DIRECT
          - DOMAIN,yacd.haishan.me,DIRECT
          - RULE-SET,openai,ğŸ˜€OpenAI
          - RULE-SET,massivedata,ğŸššå¤§æµé‡
          - RULE-SET,bilibili,ğŸ¬å“”å“©å“”å“©
          - RULE-SET,netflix,ğŸ“½Netflix
          - RULE-SET,private,DIRECT
          - RULE-SET,reject,REJECT
          - RULE-SET,icloud,ğŸè‹¹æœæœåŠ¡
          - RULE-SET,apple,ğŸè‹¹æœæœåŠ¡
          - RULE-SET,google,ğŸŒå›½å¤–æµé‡
          - RULE-SET,proxy,ğŸ’¬å›½å¤–åª’ä½“-æ–‡å­—å›¾ç‰‡
          - RULE-SET,direct,DIRECT
          - RULE-SET,lancidr,DIRECT
          - RULE-SET,cncidr,DIRECT
          - RULE-SET,steam,ğŸ®Steam
          - RULE-SET,telegramcidr,âœˆï¸Telegram
          - GEOIP,LAN,DIRECT,no-resolve
          - GEOIP,CN,DIRECT,no-resolve
          - MATCH,âš“ï¸å…¶ä»–æµé‡
        # å¼•ç”¨Githubä¸Šçš„è§„åˆ™é›† domainæ˜¯url,ipcidræ˜¯æ•°å­—ip,classicalæ˜¯ç¨‹åºåç§°
        mix-rule-providers:
          reject:
            type: file
            behavior: domain
            path: ./providers/rules/reject.txt
          icloud:
            type: file
            behavior: domain
            path: ./providers/rules/icloud.txt
          apple:
            type: file
            behavior: domain
            path: ./providers/rules/apple.txt
          google:
            type: file
            behavior: domain
            path: ./providers/rules/google.txt
          proxy:
            type: file
            behavior: domain
            path: ./providers/rules/proxy.txt
          direct:
            type: file
            behavior: domain
            path: ./providers/rules/direct.txt
          private:
            type: file
            behavior: domain
            path: ./providers/rules/private.txt
          telegramcidr:
            type: file
            behavior: ipcidr
            path: ./providers/rules/telegramcidr.txt
          cncidr:
            type: file
            behavior: ipcidr
            path: ./providers/rules/cncidr.txt
          lancidr:
            type: file
            behavior: ipcidr
            path: ./providers/rules/lancidr.txt
          applications:
            type: file
            behavior: classical
            path: ./providers/rules/applications.txt
          netflix:
            type: file
            behavior: domain
            path: ./providers/rules/netflix.txt
          bilibili:
            type: file
            behavior: domain
            path: ./providers/rules/bilibili.txt
          massivedata:
            type: file
            behavior: domain
            path: ./providers/rules/massivedata.txt
          openai:
            type: file
            behavior: domain
            path: ./providers/rules/openai.txt
          steam:
            type: file
            behavior: domain
            path: ./providers/rules/steam.txt